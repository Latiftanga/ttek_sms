{% load core_tags %}
<div id="subjects-container">
    {% if subjects %}
    <div class="space-y-2 max-h-64 overflow-y-auto">
        {% for subject in subjects %}
        <div class="flex items-center justify-between p-2 rounded-lg bg-base-200/30 hover:bg-base-200/50 transition-colors group">
            <div class="flex items-center gap-2 min-w-0 flex-1">
                <div class="w-8 h-8 rounded bg-info/10 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-book text-info text-xs"></i>
                </div>
                <div class="min-w-0 flex-1">
                    <span class="font-medium text-sm block truncate">{{ subject.name }}</span>
                    {% if subject.short_name %}
                    <span class="text-xs text-base-content/50">{{ subject.short_name }}</span>
                    {% endif %}
                </div>
            </div>
            <div class="flex items-center gap-2 flex-shrink-0">
                {% if school.has_programmes %}
                {% if subject.is_core %}
                <span class="badge badge-primary badge-xs">Core</span>
                {% else %}
                <span class="badge badge-ghost badge-xs">Elective</span>
                {% endif %}
                {% endif %}
                <div class="flex items-center gap-0.5 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity">
                    <button class="btn btn-ghost btn-xs btn-square hover:bg-primary/10 hover:text-primary"
                            hx-get="{% url 'academics:subject_edit' subject.pk %}"
                            hx-target="#modal-subject-edit-content"
                            hx-swap="innerHTML"
                            hx-on::after-request="document.getElementById('modal_subject_edit').showModal()"
                            title="Edit {{ subject.name }}">
                        <i class="fa-solid fa-pen text-xs"></i>
                    </button>
                    <form hx-post="{% url 'academics:subject_delete' subject.pk %}"
                          hx-target="#subjects-container"
                          hx-swap="outerHTML"
                          hx-confirm="Delete '{{ subject.name }}'?"
                          class="inline">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-ghost btn-xs btn-square hover:bg-error/10 hover:text-error" title="Delete">
                            <i class="fa-solid fa-trash text-xs"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-6">
        <div class="w-12 h-12 rounded-full bg-info/10 flex items-center justify-center mx-auto mb-3">
            <i class="fa-solid fa-book text-info text-lg"></i>
        </div>
        <p class="text-sm text-base-content/70 font-medium mb-1">No subjects yet</p>
        <p class="text-xs text-base-content/50 max-w-xs mx-auto">
            Add subjects like Mathematics, English, Science. These can be assigned to classes.
        </p>
    </div>
    {% endif %}
</div>
