{% load core_tags %}

<h3 class="font-bold text-lg mb-4">
    <i class="fa-solid fa-door-open text-primary"></i>
    {{ action }} Classroom
</h3>

<form hx-post="{% if classroom %}{% url 'academics:classroom_edit' classroom.pk %}{% else %}{% url 'academics:classroom_create' %}{% endif %}"
      hx-target="#modal-container"
      hx-swap="innerHTML"
      class="space-y-4">
    {% csrf_token %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Name -->
        <div class="form-control md:col-span-2">
            <label class="label">
                <span class="label-text font-medium">Room Name</span>
            </label>
            <input type="text" name="name"
                   value="{{ form.name.value|default:'' }}"
                   placeholder="e.g., Room 101, Science Lab 1"
                   class="input input-bordered w-full" required>
            {% if form.name.errors %}
            <label class="label"><span class="label-text-alt text-error">{{ form.name.errors.0 }}</span></label>
            {% endif %}
        </div>

        <!-- Code -->
        <div class="form-control">
            <label class="label">
                <span class="label-text font-medium">Code</span>
                <span class="label-text-alt text-base-content/50">Optional</span>
            </label>
            <input type="text" name="code"
                   value="{{ form.code.value|default:'' }}"
                   placeholder="e.g., R101, LAB1"
                   class="input input-bordered w-full">
            {% if form.code.errors %}
            <label class="label"><span class="label-text-alt text-error">{{ form.code.errors.0 }}</span></label>
            {% endif %}
        </div>

        <!-- Capacity -->
        <div class="form-control">
            <label class="label">
                <span class="label-text font-medium">Capacity</span>
            </label>
            <input type="number" name="capacity"
                   value="{{ form.capacity.value|default:'40' }}"
                   min="1" max="500"
                   class="input input-bordered w-full">
            {% if form.capacity.errors %}
            <label class="label"><span class="label-text-alt text-error">{{ form.capacity.errors.0 }}</span></label>
            {% endif %}
        </div>

        <!-- Room Type -->
        <div class="form-control md:col-span-2">
            <label class="label">
                <span class="label-text font-medium">Room Type</span>
            </label>
            <select name="room_type" class="select select-bordered w-full">
                <option value="regular" {% if form.room_type.value == 'regular' or not form.room_type.value %}selected{% endif %}>Regular Classroom</option>
                <option value="lab" {% if form.room_type.value == 'lab' %}selected{% endif %}>Laboratory</option>
                <option value="computer" {% if form.room_type.value == 'computer' %}selected{% endif %}>Computer Lab</option>
                <option value="library" {% if form.room_type.value == 'library' %}selected{% endif %}>Library</option>
                <option value="hall" {% if form.room_type.value == 'hall' %}selected{% endif %}>Assembly Hall</option>
                <option value="other" {% if form.room_type.value == 'other' %}selected{% endif %}>Other</option>
            </select>
            {% if form.room_type.errors %}
            <label class="label"><span class="label-text-alt text-error">{{ form.room_type.errors.0 }}</span></label>
            {% endif %}
        </div>

        <!-- Is Active -->
        <div class="form-control md:col-span-2">
            <label class="label cursor-pointer justify-start gap-3">
                <input type="checkbox" name="is_active" class="checkbox checkbox-success"
                       {% if form.is_active.value or form.is_active.value == None %}checked{% endif %}>
                <span class="label-text">Active (available for scheduling)</span>
            </label>
        </div>
    </div>

    {% if form.non_field_errors %}
    <div class="alert alert-error">
        <i class="fa-solid fa-exclamation-circle"></i>
        <span>{{ form.non_field_errors.0 }}</span>
    </div>
    {% endif %}

    <div class="modal-action">
        <button type="button" class="btn btn-ghost" onclick="modal_form.close()">Cancel</button>
        <button type="submit" class="btn btn-primary">
            <i class="fa-solid fa-save"></i>
            {{ action }} Classroom
        </button>
    </div>
</form>
