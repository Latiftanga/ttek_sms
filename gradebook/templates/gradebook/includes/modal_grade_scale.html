{% load core_tags %}

<h3 class="font-bold text-lg mb-4">
    {% if scale %}Edit Grade{% else %}Add Grade to {{ system.name }}{% endif %}
</h3>

{% if error %}
<div class="alert alert-error mb-4 py-2 text-sm">
    <i class="fa-solid fa-circle-exclamation"></i>
    <span>{{ error }}</span>
</div>
{% endif %}

<form method="post"
      hx-post="{% if scale %}{% url 'gradebook:grade_scale_edit' scale.pk %}{% else %}{% url 'gradebook:grade_scale_create' system.pk %}{% endif %}"
      hx-target="#modal-content">

    <div class="space-y-3">
        <div class="grid grid-cols-2 gap-3">
            {% text_input "grade_label" value=scale.grade_label label="Grade Label" placeholder="e.g., A1" required=True size="sm" %}
            {% number_input "aggregate_points" value=scale.aggregate_points label="Aggregate Points" placeholder="1-9" min=1 max=9 size="sm" %}
        </div>

        <div class="grid grid-cols-2 gap-3">
            {% number_input "min_percentage" value=scale.min_percentage label="Min %" placeholder="e.g., 80" min=0 max=100 step="0.01" required=True size="sm" %}
            {% number_input "max_percentage" value=scale.max_percentage label="Max %" placeholder="e.g., 100" min=0 max=100 step="0.01" required=True size="sm" %}
        </div>

        <div class="grid grid-cols-2 gap-3">
            {% text_input "interpretation" value=scale.interpretation label="Interpretation" placeholder="e.g., Excellent" size="sm" %}
            {% number_input "order" value=scale.order|default:"0" label="Display Order" min=0 size="sm" %}
        </div>

        <div class="flex flex-wrap gap-4">
            {% with is_pass_default=scale.is_pass|default:True %}
            {% checkbox_input "is_pass" checked=is_pass_default label="Pass Grade" size="sm" color="success" %}
            {% endwith %}
            {% with is_credit_default=scale.is_credit|default:True %}
            {% checkbox_input "is_credit" checked=is_credit_default label="Credit Pass" size="sm" %}
            {% endwith %}
        </div>
    </div>

    <div class="modal-action">
        <button type="button" class="btn btn-sm btn-ghost" onclick="modal_gradebook.close()">Cancel</button>
        <button type="submit" class="btn btn-sm btn-primary">
            {% if scale %}Save{% else %}Add{% endif %}
        </button>
    </div>
</form>
