{% load core_tags %}

<div class="print:max-w-none"
     x-data="{
        activeTab: new URLSearchParams(window.location.search).get('tab') || 'overview',
        setTab(tab) {
            this.activeTab = tab;
            const url = new URL(window.location);
            url.searchParams.set('tab', tab);
            window.history.replaceState({}, '', url);
        }
     }">

    <!-- Compact Header -->
    <div class="flex items-center gap-2 sm:gap-3 mb-4 print:!hidden">
        <a href="{{ back_url|default:'/teachers/' }}"
           hx-get="{{ back_url|default:'/teachers/' }}"
           hx-target="#main-content"
           hx-push-url="true"
           class="w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center shrink-0"
           title="Go back">
            <i class="fa-solid fa-arrow-left text-white text-sm sm:text-base"></i>
        </a>
        <div class="flex-1 min-w-0">
            <h1 class="text-base sm:text-xl font-bold truncate">{{ teacher.get_title_display }} {{ teacher.full_name }}</h1>
            <p class="text-[10px] sm:text-xs text-base-content/60 flex items-center gap-1 sm:gap-2">
                <span class="font-mono">{{ teacher.staff_id }}</span>
                <span class="hidden sm:inline">â€¢</span>
                <span class="hidden sm:inline">{{ teacher.subject_specialization }}</span>
            </p>
        </div>
        <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost btn-sm btn-square">
                <i class="fa-solid fa-ellipsis-vertical"></i>
            </label>
            <ul tabindex="0" class="dropdown-content menu menu-sm bg-base-100 rounded-box shadow-lg border border-base-200 w-44 z-50">
                <li>
                    <a href="{% url 'teachers:teacher_edit' teacher.pk %}"
                       hx-get="{% url 'teachers:teacher_edit' teacher.pk %}"
                       hx-target="#main-content"
                       hx-push-url="true">
                        <i class="fa-solid fa-pen"></i> Edit
                    </a>
                </li>
                <li>
                    <a href="{% url 'teachers:teacher_schedule' teacher.pk %}"
                       hx-get="{% url 'teachers:teacher_schedule' teacher.pk %}"
                       hx-target="#main-content"
                       hx-push-url="true">
                        <i class="fa-solid fa-calendar-days"></i> Schedule
                    </a>
                </li>
                <li>
                    <a href="{% url 'teachers:teacher_detail_pdf' teacher.pk %}">
                        <i class="fa-solid fa-file-pdf"></i> Download PDF
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Print Header -->
    <div class="hidden print:!block print:mb-6 print:border-b print:border-black print:pb-3">
        <div class="text-center">
            <h1 class="text-lg font-bold uppercase">Staff Record</h1>
            <h2 class="text-xl font-bold mt-2">{{ teacher.get_title_display }} {{ teacher.full_name }}</h2>
            <p class="text-sm">{{ teacher.staff_id }} | {{ teacher.subject_specialization }}</p>
        </div>
    </div>

    <!-- Profile Card -->
    <div class="card bg-base-100 shadow-sm border border-base-200 mb-4 print:shadow-none print:border-gray-300">
        <div class="card-body p-4">
            <div class="flex items-start gap-4">
                <!-- Avatar -->
                <div class="avatar shrink-0">
                    <div class="w-16 sm:w-20 rounded-full bg-base-200 ring-2 ring-primary ring-offset-base-100 ring-offset-2">
                        {% if teacher.photo %}
                        <img src="{{ teacher.photo.url }}" alt="{{ teacher.full_name }}" class="rounded-full object-cover" loading="lazy" />
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center {{ teacher.gender|yesno:'bg-blue-100 text-blue-600,bg-pink-100 text-pink-600' }}">
                            <span class="text-xl sm:text-2xl font-bold">{{ teacher.first_name|slice:":1" }}{{ teacher.last_name|slice:":1" }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Info -->
                <div class="flex-1 min-w-0">
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                        {% if teacher.status == 'active' %}
                        <span class="badge badge-success badge-sm">Active</span>
                        {% elif teacher.status == 'inactive' %}
                        <span class="badge badge-error badge-sm">Inactive</span>
                        {% elif teacher.status == 'pending' %}
                        <span class="badge badge-warning badge-sm">Pending</span>
                        {% else %}
                        <span class="badge badge-ghost badge-sm">{{ teacher.get_status_display }}</span>
                        {% endif %}
                        <span class="badge badge-primary badge-outline badge-sm">{{ teacher.subject_specialization }}</span>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm">
                        <div>
                            <p class="text-[10px] uppercase text-base-content/50 font-medium">Gender</p>
                            <p class="font-medium flex items-center gap-1">
                                <i class="fa-solid {{ teacher.gender|yesno:'fa-mars text-blue-500,fa-venus text-pink-500' }} text-xs"></i>
                                {{ teacher.get_gender_display }}
                            </p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase text-base-content/50 font-medium">Employed</p>
                            <p class="font-medium">{{ teacher.employment_date|date:"M Y" }}</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase text-base-content/50 font-medium">Classes</p>
                            <p class="font-medium">{{ workload.classes_taught }}</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase text-base-content/50 font-medium">Students</p>
                            <p class="font-medium">{{ workload.total_students }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Quick Actions -->
            {% if teacher.phone_number %}
            <div class="flex gap-2 mt-4 pt-3 border-t border-base-200 sm:hidden">
                <a href="tel:{{ teacher.phone_number }}" class="btn btn-sm btn-outline flex-1 gap-1">
                    <i class="fa-solid fa-phone"></i> Call
                </a>
                {% if teacher.email %}
                <a href="mailto:{{ teacher.email }}" class="btn btn-sm btn-primary flex-1 gap-1">
                    <i class="fa-solid fa-envelope"></i> Email
                </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Tabbed Content -->
    <div class="card bg-base-100 shadow-sm border border-base-200 print:shadow-none print:border-gray-300">

        <!-- Tabs Header -->
        <div class="border-b border-base-200 px-2 sm:px-4 pt-1 print:!hidden">
            <div class="flex overflow-x-auto scrollbar-none -mb-px">
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'overview' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('overview')">
                    <i class="fa-regular fa-id-card sm:mr-1.5"></i>
                    <span class="hidden sm:inline">Overview</span>
                </button>
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'classes' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('classes')">
                    <i class="fa-solid fa-chalkboard sm:mr-1.5"></i>
                    <span class="hidden sm:inline">Classes</span>
                </button>
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'pd' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('pd')">
                    <i class="fa-solid fa-graduation-cap sm:mr-1.5"></i>
                    <span class="hidden sm:inline">Development</span>
                </button>
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'documents' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('documents')">
                    <i class="fa-solid fa-folder-open sm:mr-1.5"></i>
                    <span class="hidden sm:inline">Documents</span>
                </button>
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'account' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('account')">
                    <i class="fa-solid fa-user-shield sm:mr-1.5"></i>
                    <span class="hidden sm:inline">Account</span>
                </button>
                <button class="flex-1 sm:flex-none px-3 sm:px-5 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap cursor-pointer"
                        :class="activeTab === 'system' ? 'border-primary text-primary' : 'border-transparent text-base-content/60 hover:text-base-content'"
                        @click="setTab('system')">
                    <i class="fa-solid fa-gear sm:mr-1.5"></i>
                    <span class="hidden sm:inline">System</span>
                </button>
            </div>
        </div>

        <!-- Tab: Overview -->
        <div x-show="activeTab === 'overview'" x-cloak class="p-4 sm:p-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Personal Info -->
                <div>
                    <h3 class="font-bold text-xs uppercase text-base-content/50 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-user text-primary"></i> Personal Information
                    </h3>
                    <div class="space-y-3">
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-base-200/50 rounded-lg p-3">
                                <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Full Name</p>
                                <p class="font-medium text-sm">{{ teacher.get_title_display }} {{ teacher.full_name }}</p>
                            </div>
                            <div class="bg-base-200/50 rounded-lg p-3">
                                <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Date of Birth</p>
                                <p class="font-medium text-sm">{{ teacher.date_of_birth|date:"M j, Y" }}</p>
                            </div>
                            <div class="bg-base-200/50 rounded-lg p-3">
                                <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Gender</p>
                                <p class="font-medium text-sm">{{ teacher.get_gender_display }}</p>
                            </div>
                            <div class="bg-base-200/50 rounded-lg p-3">
                                <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Nationality</p>
                                <p class="font-medium text-sm">{{ teacher.nationality|default:"Not specified" }}</p>
                            </div>
                        </div>
                        {% if teacher.address %}
                        <div class="bg-base-200/50 rounded-lg p-3">
                            <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Address</p>
                            <p class="font-medium text-sm">{{ teacher.address }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Contact & Employment -->
                <div class="space-y-6">
                    <!-- Contact Info -->
                    <div>
                        <h3 class="font-bold text-xs uppercase text-base-content/50 mb-3 flex items-center gap-2">
                            <i class="fa-solid fa-address-book text-secondary"></i> Contact Information
                        </h3>
                        <div class="space-y-3">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                <div class="bg-base-200/50 rounded-lg p-3">
                                    <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Phone</p>
                                    {% if teacher.phone_number %}
                                    <a href="tel:{{ teacher.phone_number }}" class="font-medium text-sm link link-hover">{{ teacher.phone_number }}</a>
                                    {% else %}
                                    <p class="font-medium text-sm text-base-content/40">Not provided</p>
                                    {% endif %}
                                </div>
                                <div class="bg-base-200/50 rounded-lg p-3">
                                    <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Email</p>
                                    {% if teacher.email %}
                                    <a href="mailto:{{ teacher.email }}" class="font-medium text-sm link link-hover truncate block">{{ teacher.email }}</a>
                                    {% else %}
                                    <p class="font-medium text-sm text-base-content/40">Not provided</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Employment Info -->
                    <div>
                        <h3 class="font-bold text-xs uppercase text-base-content/50 mb-3 flex items-center gap-2">
                            <i class="fa-solid fa-briefcase text-accent"></i> Employment Details
                        </h3>
                        <div class="space-y-3">
                            <div class="bg-base-200/50 rounded-lg p-3">
                                <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Staff ID</p>
                                <p class="font-mono font-medium text-sm tracking-wide">{{ teacher.staff_id }}</p>
                            </div>
                            <div class="grid grid-cols-2 gap-3">
                                <div class="bg-base-200/50 rounded-lg p-3">
                                    <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Employment Date</p>
                                    <p class="font-medium text-sm">{{ teacher.employment_date|date:"M j, Y" }}</p>
                                </div>
                                <div class="bg-base-200/50 rounded-lg p-3">
                                    <p class="text-[10px] uppercase text-base-content/50 font-medium mb-0.5">Service</p>
                                    <p class="font-medium text-sm">{{ teacher.employment_date|timesince }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Classes -->
        <div x-show="activeTab === 'classes'" x-cloak class="p-4 sm:p-6" style="display: none;">
            <!-- Workload Stats -->
            <div id="workload-stats">
                {% include "teachers/partials/workload_stats.html" %}
            </div>

            <!-- Classes & Assignments -->
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-bold text-xs uppercase text-base-content/50 flex items-center gap-2">
                    <i class="fa-solid fa-chalkboard-user text-primary"></i> Classes
                    {% if classes_list %}<span class="badge badge-xs badge-ghost">{{ classes_list|length }}</span>{% endif %}
                </h3>
                <button class="btn btn-primary btn-sm"
                        hx-get="{% url 'teachers:assign_lesson' teacher.pk %}"
                        hx-target="#modal-container"
                        onclick="document.getElementById('modal_form').showModal()">
                    <i class="fa-solid fa-plus"></i>
                    <span class="hidden sm:inline">Assign</span>
                </button>
            </div>

            <div class="space-y-2" id="teaching-assignments-list">
                {% include "teachers/partials/teaching_assignments_list.html" %}
            </div>
        </div>

        <!-- Tab: Professional Development -->
        <div x-show="activeTab === 'pd'" x-cloak class="p-4 sm:p-6" style="display: none;"
             x-init="$watch('activeTab', value => {
                if (value === 'pd' && !$el.dataset.loaded) {
                    $el.dataset.loaded = 'true';
                    htmx.ajax('GET', '{% url 'teachers:pd_list' teacher.pk %}', {target: '#pd-content', swap: 'innerHTML'});
                }
             })">
            <div id="pd-content">
                <div class="flex justify-center py-8">
                    <span class="loading loading-spinner loading-lg text-primary"></span>
                </div>
            </div>
        </div>

        <!-- Tab: Documents -->
        <div x-show="activeTab === 'documents'" x-cloak class="p-4 sm:p-6" style="display: none;"
             x-init="$watch('activeTab', value => {
                if (value === 'documents' && !$el.dataset.loaded) {
                    $el.dataset.loaded = 'true';
                    htmx.ajax('GET', '{% url 'teachers:document_list' teacher.pk %}', {target: '#doc-content', swap: 'innerHTML'});
                }
             })">
            <div id="doc-content">
                <div class="flex justify-center py-8">
                    <span class="loading loading-spinner loading-lg text-primary"></span>
                </div>
            </div>
        </div>

        <!-- Tab: Account -->
        <div x-show="activeTab === 'account'" x-cloak class="p-4 sm:p-6" style="display: none;">
            {% if teacher.user %}
            <div class="bg-success/5 border border-success/20 rounded-xl p-4 mb-4">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-success/10 flex items-center justify-center text-success shrink-0">
                        <i class="fa-solid fa-check"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="font-bold text-sm">Account Active</p>
                        <p class="text-xs text-base-content/60 truncate">{{ teacher.user.email }}</p>
                    </div>
                    <span class="badge badge-sm {% if teacher.user.is_active %}badge-success{% else %}badge-error{% endif %}">
                        {% if teacher.user.is_active %}Active{% else %}Deactivated{% endif %}
                    </span>
                </div>
                <p class="text-xs text-base-content/60 mb-4">
                    {% if teacher.user.last_login %}
                    Last login: {{ teacher.user.last_login|date:"M j, Y g:i A" }}
                    {% else %}
                    Never logged in
                    {% endif %}
                </p>
                <div class="flex flex-wrap gap-2">
                    <form hx-post="{% url 'teachers:reset_password' teacher.pk %}"
                          hx-confirm="Reset password for {{ teacher.full_name }}? A new temporary password will be sent to their email."
                          hx-indicator="#reset-spinner">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-outline btn-warning">
                            <i class="fa-solid fa-key"></i> Reset Password
                            <span id="reset-spinner" class="loading loading-spinner loading-xs htmx-indicator"></span>
                        </button>
                    </form>
                    {% if teacher.user.is_active %}
                    <form hx-post="{% url 'teachers:deactivate_account' teacher.pk %}"
                          hx-confirm="Deactivate account for {{ teacher.full_name }}? They will no longer be able to log in."
                          hx-indicator="#deactivate-spinner">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-outline btn-error">
                            <i class="fa-solid fa-user-slash"></i> Deactivate
                            <span id="deactivate-spinner" class="loading loading-spinner loading-xs htmx-indicator"></span>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>

            <!-- School Admin Role -->
            <div class="bg-base-200/50 rounded-xl p-4 mb-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full {% if teacher.user.is_school_admin %}bg-primary/10 text-primary{% else %}bg-base-300 text-base-content/50{% endif %} flex items-center justify-center shrink-0">
                            <i class="fa-solid fa-user-shield"></i>
                        </div>
                        <div>
                            <p class="font-bold text-sm">School Administrator</p>
                            <p class="text-xs text-base-content/60">
                                {% if teacher.user.is_school_admin %}
                                Can manage school settings, teachers, students, and all data
                                {% else %}
                                Grant admin access to manage the school
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    <form hx-post="{% url 'teachers:toggle_school_admin' teacher.pk %}"
                          hx-confirm="{% if teacher.user.is_school_admin %}Remove school admin privileges from {{ teacher.full_name }}?{% else %}Grant school admin privileges to {{ teacher.full_name }}? They will be able to manage all school data.{% endif %}"
                          hx-indicator="#admin-toggle-spinner">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm {% if teacher.user.is_school_admin %}btn-primary{% else %}btn-outline{% endif %}">
                            {% if teacher.user.is_school_admin %}
                            <i class="fa-solid fa-check"></i> Admin
                            {% else %}
                            <i class="fa-solid fa-plus"></i> Make Admin
                            {% endif %}
                            <span id="admin-toggle-spinner" class="loading loading-spinner loading-xs htmx-indicator"></span>
                        </button>
                    </form>
                </div>
            </div>
            {% else %}
            <div class="bg-warning/5 border border-warning/20 rounded-xl p-4 mb-4">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-warning/10 flex items-center justify-center text-warning shrink-0">
                        <i class="fa-solid fa-user-slash"></i>
                    </div>
                    <div>
                        <p class="font-bold text-sm">No Account</p>
                        <p class="text-xs text-base-content/60">Teacher cannot log in to the system</p>
                    </div>
                </div>

                {% if pending_invitation %}
                <div class="alert alert-info py-3 mb-4">
                    <i class="fa-solid fa-clock"></i>
                    <div class="flex-1">
                        <p class="text-sm font-medium">Invitation pending</p>
                        <p class="text-xs opacity-80">Sent to {{ pending_invitation.email }} on {{ pending_invitation.created_at|date:"M d, Y" }}</p>
                    </div>
                    <div class="flex gap-1">
                        <form hx-post="{% url 'teachers:resend_invitation' teacher.pk %}"
                              hx-confirm="Resend invitation to {{ teacher.full_name }}?">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-ghost min-w-[44px] min-h-[44px]" title="Resend">
                                <i class="fa-solid fa-rotate-right"></i>
                            </button>
                        </form>
                        <form hx-post="{% url 'teachers:cancel_invitation' teacher.pk %}"
                              hx-confirm="Cancel invitation for {{ teacher.full_name }}?">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-ghost text-error min-w-[44px] min-h-[44px]" title="Cancel">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </form>
                    </div>
                </div>
                {% endif %}

                <div class="flex flex-wrap gap-2">
                    <button class="btn btn-sm btn-primary"
                            hx-get="{% url 'teachers:send_invitation' teacher.pk %}"
                            hx-target="#modal-container"
                            onclick="document.getElementById('modal_form').showModal()">
                        <i class="fa-solid fa-envelope"></i> Send Invite
                    </button>
                    <button class="btn btn-sm btn-outline"
                            hx-get="{% url 'teachers:create_account' teacher.pk %}"
                            hx-target="#modal-container"
                            onclick="document.getElementById('modal_form').showModal()">
                        <i class="fa-solid fa-user-plus"></i> Create Instant
                    </button>
                </div>
                <p class="text-xs text-base-content/50 mt-3">
                    <strong>Send Invite:</strong> Teacher sets their own password<br>
                    <strong>Create Instant:</strong> System generates temporary password
                </p>
            </div>
            {% endif %}
        </div>

        <!-- Tab: System -->
        <div x-show="activeTab === 'system'" x-cloak class="p-4 sm:p-6" style="display: none;">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- System Info -->
                <div>
                    <h3 class="font-bold text-xs uppercase text-base-content/50 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-info-circle text-primary"></i> System Information
                    </h3>
                    <div class="bg-base-200/50 rounded-xl p-4 space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-base-content/60">Created</span>
                            <span class="font-medium">{{ teacher.created_at|date:"M j, Y" }}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-base-content/60">Last Updated</span>
                            <span class="font-medium">{{ teacher.updated_at|date:"M j, Y" }}</span>
                        </div>
                    </div>
                </div>

                <!-- Danger Zone -->
                <div>
                    <h3 class="font-bold text-xs uppercase text-error/70 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-triangle-exclamation"></i> Danger Zone
                    </h3>
                    <div class="bg-error/5 border border-error/20 rounded-xl p-4">
                        <p class="font-bold text-sm text-error mb-1">Delete Teacher</p>
                        <p class="text-xs text-base-content/60 mb-3">This will permanently remove this teacher and all related records.</p>
                        <form hx-post="{% url 'teachers:teacher_delete' teacher.pk %}"
                              hx-confirm="Delete {{ teacher.full_name|escapejs }}? This action cannot be undone."
                              hx-indicator="#delete-spinner">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-error btn-sm btn-outline w-full">
                                <i class="fa-solid fa-trash"></i> Delete Teacher
                                <span id="delete-spinner" class="loading loading-spinner loading-xs htmx-indicator"></span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Print Footer -->
    <div class="hidden print:!block print:mt-6 print:pt-3 print:border-t print:text-center print:text-xs">
        Printed on {% now "M j, Y g:i A" %}
    </div>
</div>

<!-- Modal Form Container -->
<dialog id="modal_form" class="modal modal-bottom sm:modal-middle" hx-on::closeModal="this.close()">
    <div class="modal-box max-w-2xl" id="modal-container">
        <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </form>
        <div class="flex justify-center py-8">
            <span class="loading loading-spinner loading-lg"></span>
        </div>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>
