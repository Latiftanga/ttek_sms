<div class="max-w-2xl">
    <h3 class="font-bold text-lg mb-1">
        {% if is_edit %}Edit Document{% else %}Upload Document{% endif %}
    </h3>
    <p class="text-sm text-base-content/60 mb-4">Upload and manage teacher documents</p>

    <form hx-post="{% if is_edit %}{% if is_self_service %}{% url 'core:my_documents_edit' document.pk %}{% else %}{% url 'teachers:document_edit' teacher.pk document.pk %}{% endif %}{% else %}{% if is_self_service %}{% url 'core:my_documents_create' %}{% else %}{% url 'teachers:document_create' teacher.pk %}{% endif %}{% endif %}"
          hx-target="#doc-content"
          hx-swap="innerHTML"
          enctype="multipart/form-data"
          class="space-y-4">
        {% csrf_token %}

        <!-- Section: Document Info -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-file"></i> Document Information
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="md:col-span-2">
                    <label class="label py-1"><span class="label-text text-xs font-medium">Document Title *</span></label>
                    <input type="text" name="title" value="{{ form.title.value|default:'' }}"
                           class="input input-bordered input-sm w-full"
                           placeholder="e.g., Teaching Certificate 2024" required>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Document Type *</span></label>
                    <select name="document_type" class="select select-bordered select-sm w-full">
                        {% for value, label in form.fields.document_type.choices %}
                        <option value="{{ value }}" {% if form.document_type.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">File {% if not is_edit %}*{% endif %}</span></label>
                    <input type="file" name="file"
                           class="file-input file-input-bordered file-input-sm w-full"
                           accept=".pdf,.jpg,.jpeg,.png,.doc,.docx"
                           {% if not is_edit %}required{% endif %}>
                </div>
            </div>
            {% if document.file %}
            <div class="mt-2 text-xs text-base-content/60 flex items-center gap-2">
                <i class="fa-solid fa-paperclip"></i>
                <span>Current file: {{ document.file.name|slice:"-30:" }}</span>
                <a href="{{ document.file.url }}" target="_blank" class="link link-primary">View</a>
            </div>
            {% endif %}
        </div>

        <!-- Section: Dates -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-calendar"></i> Dates
            </h4>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Issue Date</span></label>
                    <input type="date" name="issue_date" value="{{ form.issue_date.value|date:'Y-m-d' }}"
                           class="input input-bordered input-sm w-full">
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Expiry Date</span></label>
                    <input type="date" name="expiry_date" value="{{ form.expiry_date.value|date:'Y-m-d' }}"
                           class="input input-bordered input-sm w-full">
                    <div class="label py-0">
                        <span class="label-text-alt text-base-content/50">Leave blank if no expiry</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section: Description -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-pen"></i> Description
            </h4>
            <textarea name="description" class="textarea textarea-bordered textarea-sm w-full" rows="2"
                      placeholder="Brief description of the document (optional)">{{ form.description.value|default:'' }}</textarea>
        </div>

        <!-- Actions -->
        <div class="flex justify-end gap-2 pt-2">
            <button type="button" class="btn btn-ghost btn-sm" onclick="document.getElementById('modal_form').close()">Cancel</button>
            <button type="submit" class="btn btn-primary btn-sm">
                <i class="fa-solid fa-{% if is_edit %}check{% else %}upload{% endif %}"></i>
                {% if is_edit %}Save Changes{% else %}Upload{% endif %}
            </button>
        </div>
    </form>
</div>
