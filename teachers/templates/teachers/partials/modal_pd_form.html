<div class="max-w-2xl">
    <h3 class="font-bold text-lg mb-1">
        {% if is_edit %}Edit Activity{% else %}Add Professional Development{% endif %}
    </h3>
    <p class="text-sm text-base-content/60 mb-4">Record training, workshops, certifications, and CPD activities</p>

    <form hx-post="{% if is_edit %}{% if is_self_service %}{% url 'core:my_pd_edit' activity.pk %}{% else %}{% url 'teachers:pd_edit' teacher.pk activity.pk %}{% endif %}{% else %}{% if is_self_service %}{% url 'core:my_pd_create' %}{% else %}{% url 'teachers:pd_create' teacher.pk %}{% endif %}{% endif %}"
          hx-target="{% if is_self_service %}#pd-content{% else %}#pd-content{% endif %}"
          hx-swap="innerHTML"
          enctype="multipart/form-data"
          class="space-y-4">
        {% csrf_token %}

        <!-- Section: Basic Info -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-info-circle"></i> Basic Information
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="md:col-span-2">
                    <label class="label py-1"><span class="label-text text-xs font-medium">Activity Title *</span></label>
                    <input type="text" name="title" value="{{ form.title.value|default:'' }}"
                           class="input input-bordered input-sm w-full"
                           placeholder="e.g., Advanced Teaching Methods Workshop" required>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Type *</span></label>
                    <select name="activity_type" class="select select-bordered select-sm w-full">
                        {% for value, label in form.fields.activity_type.choices %}
                        <option value="{{ value }}" {% if form.activity_type.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Status *</span></label>
                    <select name="status" class="select select-bordered select-sm w-full">
                        {% for value, label in form.fields.status.choices %}
                        <option value="{{ value }}" {% if form.status.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="md:col-span-2">
                    <label class="label py-1"><span class="label-text text-xs font-medium">Provider / Institution</span></label>
                    <input type="text" name="provider" value="{{ form.provider.value|default:'' }}"
                           class="input input-bordered input-sm w-full"
                           placeholder="e.g., Ghana Education Service, University of Ghana">
                </div>
            </div>
        </div>

        <!-- Section: Schedule & Hours -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-calendar"></i> Schedule & Hours
            </h4>
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Start Date *</span></label>
                    <input type="date" name="start_date" value="{{ form.start_date.value|date:'Y-m-d' }}"
                           class="input input-bordered input-sm w-full" required>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">End Date</span></label>
                    <input type="date" name="end_date" value="{{ form.end_date.value|date:'Y-m-d' }}"
                           class="input input-bordered input-sm w-full">
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">CPD Hours</span></label>
                    <input type="number" name="hours" value="{{ form.hours.value|default:'0' }}"
                           class="input input-bordered input-sm w-full" step="0.5" min="0" placeholder="0">
                </div>
            </div>
        </div>

        <!-- Section: Certification -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-certificate"></i> Certification Details
                <span class="text-[10px] font-normal normal-case">(if applicable)</span>
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Certificate Number</span></label>
                    <input type="text" name="certificate_number" value="{{ form.certificate_number.value|default:'' }}"
                           class="input input-bordered input-sm w-full" placeholder="e.g., CERT-2024-001">
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Expiry Date</span></label>
                    <input type="date" name="certificate_expiry" value="{{ form.certificate_expiry.value|date:'Y-m-d' }}"
                           class="input input-bordered input-sm w-full">
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Certificate File</span></label>
                    <input type="file" name="certificate_file"
                           class="file-input file-input-bordered file-input-sm w-full"
                           accept=".pdf,.jpg,.jpeg,.png">
                </div>
            </div>
            {% if activity.certificate_file %}
            <div class="mt-2 text-xs text-base-content/60 flex items-center gap-2">
                <i class="fa-solid fa-paperclip"></i>
                <span>Current file: {{ activity.certificate_file.name|slice:"-30:" }}</span>
            </div>
            {% endif %}
        </div>

        <!-- Section: Notes -->
        <div class="bg-base-200/30 rounded-lg p-4">
            <h4 class="text-xs font-semibold uppercase text-base-content/50 mb-3 flex items-center gap-2">
                <i class="fa-solid fa-pen"></i> Additional Information
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Description</span></label>
                    <textarea name="description" class="textarea textarea-bordered textarea-sm w-full" rows="3"
                              placeholder="Brief description of the activity">{{ form.description.value|default:'' }}</textarea>
                </div>
                <div>
                    <label class="label py-1"><span class="label-text text-xs font-medium">Key Learnings / Notes</span></label>
                    <textarea name="notes" class="textarea textarea-bordered textarea-sm w-full" rows="3"
                              placeholder="What did you learn? Key takeaways...">{{ form.notes.value|default:'' }}</textarea>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex justify-end gap-2 pt-2">
            <button type="button" class="btn btn-ghost btn-sm" onclick="modal_form.close()">Cancel</button>
            <button type="submit" class="btn btn-primary btn-sm">
                <i class="fa-solid fa-check"></i>
                {% if is_edit %}Save Changes{% else %}Add Activity{% endif %}
            </button>
        </div>
    </form>
</div>
