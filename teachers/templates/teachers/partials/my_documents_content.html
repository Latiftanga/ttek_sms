{% load core_tags %}

<div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="flex items-center gap-3 mb-6">
        <a href="{{ back_url }}"
           hx-get="{{ back_url }}"
           hx-target="#main-content"
           hx-push-url="true"
           class="w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center shrink-0">
            <i class="fa-solid fa-arrow-left text-white"></i>
        </a>
        <div class="flex-1 min-w-0">
            <h1 class="text-xl font-bold truncate">My Documents</h1>
            <p class="text-sm text-base-content/60">Upload and manage your documents</p>
        </div>
        <button class="btn btn-primary btn-sm"
                hx-get="{% url 'core:my_documents_create' %}"
                hx-target="#modal-container"
                onclick="modal_form.showModal()">
            <i class="fa-solid fa-upload"></i>
            <span class="hidden sm:inline">Upload</span>
        </button>
    </div>

    <!-- Stats Row -->
    <div class="flex flex-wrap gap-4 mb-6 text-sm">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
                <i class="fa-solid fa-folder-open text-primary"></i>
            </div>
            <div>
                <div class="font-bold text-xl leading-none">{{ stats.total }}</div>
                <div class="text-xs text-base-content/50 uppercase">Total</div>
            </div>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center">
                <i class="fa-solid fa-circle-check text-success"></i>
            </div>
            <div>
                <div class="font-bold text-xl leading-none">{{ stats.verified }}</div>
                <div class="text-xs text-base-content/50 uppercase">Verified</div>
            </div>
        </div>
        {% if stats.expiring_soon > 0 %}
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center">
                <i class="fa-solid fa-triangle-exclamation text-warning"></i>
            </div>
            <div>
                <div class="font-bold text-xl leading-none text-warning">{{ stats.expiring_soon }}</div>
                <div class="text-xs text-base-content/50 uppercase">Expiring Soon</div>
            </div>
        </div>
        {% endif %}
        {% if stats.expired > 0 %}
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-lg bg-error/10 flex items-center justify-center">
                <i class="fa-solid fa-circle-xmark text-error"></i>
            </div>
            <div>
                <div class="font-bold text-xl leading-none text-error">{{ stats.expired }}</div>
                <div class="text-xs text-base-content/50 uppercase">Expired</div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Content -->
    <div id="doc-content" class="card bg-base-100 shadow-sm border border-base-200">
        {% include 'teachers/partials/my_documents_inner.html' %}
    </div>
</div>

<!-- Modal -->
<dialog id="modal_form" class="modal modal-bottom sm:modal-middle" hx-on::closeModal="this.close()">
    <div class="modal-box max-w-2xl" id="modal-container">
        <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"><i class="fa-solid fa-xmark"></i></button>
        </form>
        <div class="flex justify-center py-8"><span class="loading loading-spinner loading-lg"></span></div>
    </div>
    <form method="dialog" class="modal-backdrop"><button>close</button></form>
</dialog>
