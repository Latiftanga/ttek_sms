{% load core_tags %}

<!-- Welcome Header -->
<div class="flex items-center gap-3 sm:gap-4 mb-6">
    <div class="avatar shrink-0">
        <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-primary text-primary-content ring ring-primary/20 ring-offset-base-100 ring-offset-2">
            {% if teacher.photo %}
            <img src="{{ teacher.photo.url }}" alt="{{ teacher.full_name }}" loading="lazy" />
            {% else %}
            <div class="flex items-center justify-center h-full text-lg sm:text-xl font-bold">
                {{ teacher.first_name|slice:":1" }}{{ teacher.last_name|slice:":1" }}
            </div>
            {% endif %}
        </div>
    </div>
    <div class="flex-1 min-w-0">
        <h1 class="text-base sm:text-xl font-bold truncate">
            <span class="hidden sm:inline">Good {% if today.hour < 12 %}morning{% elif today.hour < 17 %}afternoon{% else %}evening{% endif %}, </span>{{ teacher.get_title_display }} {{ teacher.last_name }}
        </h1>
        <p class="text-[10px] sm:text-sm text-base-content/60 flex items-center gap-2 flex-wrap">
            <span class="flex items-center gap-1">
                <i class="fa-regular fa-calendar"></i>
                <span class="hidden sm:inline">{{ today|date:"l, F j, Y" }}</span>
                <span class="sm:hidden">{{ today|date:"D, M j" }}</span>
            </span>
            {% if current_term %}
            <span class="badge badge-xs sm:badge-sm badge-ghost">{{ current_term.name }}</span>
            {% endif %}
        </p>
    </div>
    <div class="dropdown dropdown-end shrink-0">
        <label tabindex="0" class="btn btn-ghost btn-sm btn-square">
            <i class="fa-solid fa-ellipsis-vertical"></i>
        </label>
        <ul tabindex="0" class="dropdown-content menu menu-sm bg-base-100 rounded-box shadow-lg border border-base-200 w-48 z-50">
            <li>
                <a href="{% url 'core:my_grading' %}"
                   hx-get="{% url 'core:my_grading' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fa-solid fa-pen-to-square text-primary"></i> Enter Scores
                </a>
            </li>
            <li>
                <a href="{% url 'core:my_attendance' %}"
                   hx-get="{% url 'core:my_attendance' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fa-solid fa-clipboard-check text-success"></i> Attendance
                </a>
            </li>
            <li>
                <a href="{% url 'gradebook:reports' %}"
                   hx-get="{% url 'gradebook:reports' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fa-solid fa-file-lines text-info"></i> Reports
                </a>
            </li>
            <li>
                <a href="{% url 'core:schedule' %}"
                   hx-get="{% url 'core:schedule' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fa-solid fa-calendar-days text-secondary"></i> Schedule
                </a>
            </li>
            <div class="divider my-1"></div>
            <li>
                <a href="{% url 'core:profile' %}"
                   hx-get="{% url 'core:profile' %}"
                   hx-target="#main-content"
                   hx-push-url="true">
                    <i class="fa-solid fa-user text-base-content/50"></i> My Profile
                </a>
            </li>
        </ul>
    </div>
</div>

<!-- Quick Actions - Grid on mobile, inline on tablet -->
<div class="lg:hidden mb-6">
    <div class="grid grid-cols-4 gap-2">
        <a href="{% url 'core:my_grading' %}"
           hx-get="{% url 'core:my_grading' %}"
           hx-target="#main-content"
           hx-push-url="true"
           class="flex flex-col items-center justify-center p-3 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary/20 transition-all group">
            <div class="w-9 h-9 rounded-full bg-primary/10 group-hover:bg-primary group-hover:text-white flex items-center justify-center mb-1.5 transition-colors">
                <i class="fa-solid fa-pen-to-square text-sm"></i>
            </div>
            <span class="text-xs font-medium text-base-content/70 group-hover:text-primary">Scores</span>
        </a>
        <a href="{% url 'core:my_attendance' %}"
           hx-get="{% url 'core:my_attendance' %}"
           hx-target="#main-content"
           hx-push-url="true"
           class="flex flex-col items-center justify-center p-3 rounded-xl bg-success/10 border border-success/20 hover:bg-success/20 transition-all group">
            <div class="w-9 h-9 rounded-full bg-success/10 group-hover:bg-success group-hover:text-white flex items-center justify-center mb-1.5 transition-colors">
                <i class="fa-solid fa-clipboard-check text-sm"></i>
            </div>
            <span class="text-xs font-medium text-base-content/70 group-hover:text-success">Attendance</span>
        </a>
        <a href="{% url 'gradebook:reports' %}"
           hx-get="{% url 'gradebook:reports' %}"
           hx-target="#main-content"
           hx-push-url="true"
           class="flex flex-col items-center justify-center p-3 rounded-xl bg-info/10 border border-info/20 hover:bg-info/20 transition-all group">
            <div class="w-9 h-9 rounded-full bg-info/10 group-hover:bg-info group-hover:text-white flex items-center justify-center mb-1.5 transition-colors">
                <i class="fa-solid fa-file-lines text-sm"></i>
            </div>
            <span class="text-xs font-medium text-base-content/70 group-hover:text-info">Reports</span>
        </a>
        <a href="{% url 'core:schedule' %}"
           hx-get="{% url 'core:schedule' %}"
           hx-target="#main-content"
           hx-push-url="true"
           class="flex flex-col items-center justify-center p-3 rounded-xl bg-secondary/10 border border-secondary/20 hover:bg-secondary/20 transition-all group">
            <div class="w-9 h-9 rounded-full bg-secondary/10 group-hover:bg-secondary group-hover:text-white flex items-center justify-center mb-1.5 transition-colors">
                <i class="fa-solid fa-calendar-days text-sm"></i>
            </div>
            <span class="text-xs font-medium text-base-content/70 group-hover:text-secondary">Schedule</span>
        </a>
    </div>
</div>

<!-- Stats -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-6">
    <div class="card bg-base-100 shadow-sm border border-base-200">
        <div class="card-body p-3 sm:p-4">
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-chalkboard text-primary text-lg sm:text-xl"></i>
                </div>
                <div class="min-w-0">
                    <div class="text-xl sm:text-2xl font-bold text-primary">{{ stats.classes_count }}</div>
                    <div class="text-xs text-base-content/60">Classes</div>
                </div>
            </div>
        </div>
    </div>
    <div class="card bg-base-100 shadow-sm border border-base-200">
        <div class="card-body p-3 sm:p-4">
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-secondary/10 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-book text-secondary text-lg sm:text-xl"></i>
                </div>
                <div class="min-w-0">
                    <div class="text-xl sm:text-2xl font-bold text-secondary">{{ stats.subjects_count }}</div>
                    <div class="text-xs text-base-content/60">Subjects</div>
                </div>
            </div>
        </div>
    </div>
    <div class="card bg-base-100 shadow-sm border border-base-200">
        <div class="card-body p-3 sm:p-4">
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-accent/10 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-users text-accent text-lg sm:text-xl"></i>
                </div>
                <div class="min-w-0">
                    <div class="text-xl sm:text-2xl font-bold text-accent">{{ stats.total_students }}</div>
                    <div class="text-xs text-base-content/60">Students</div>
                </div>
            </div>
        </div>
    </div>
    <div class="card bg-base-100 shadow-sm border border-base-200">
        <div class="card-body p-3 sm:p-4">
            <div class="flex items-center gap-2 sm:gap-3">
                <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-info/10 flex items-center justify-center flex-shrink-0">
                    <i class="fa-solid fa-clock text-info text-lg sm:text-xl"></i>
                </div>
                <div class="min-w-0">
                    <div class="text-xl sm:text-2xl font-bold text-info">{{ stats.periods_today }}</div>
                    <div class="text-xs text-base-content/60">{% if is_weekend %}Weekend{% else %}Today{% endif %}</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Content Grid -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

    <!-- Left Column - Today's Schedule & Classes -->
    <div class="lg:col-span-2 space-y-6">

        <!-- Today's Schedule -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
            <div class="card-body p-0">
                <div class="flex items-center justify-between p-4 border-b border-base-200">
                    <h2 class="font-bold flex items-center gap-2 text-sm sm:text-base">
                        <div class="w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0">
                            <i class="fa-solid fa-clock text-primary text-sm sm:text-base"></i>
                        </div>
                        <span class="hidden sm:inline">Today's Schedule</span>
                        <span class="sm:hidden">Today</span>
                    </h2>
                    <a href="{% url 'core:schedule' %}"
                       hx-get="{% url 'core:schedule' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="btn btn-ghost btn-xs sm:btn-sm gap-1">
                        <span class="hidden sm:inline">View Full Schedule</span>
                        <span class="sm:hidden">Full</span>
                        <i class="fa-solid fa-arrow-right text-xs"></i>
                    </a>
                </div>

                <div class="p-4">
                    {% if is_weekend %}
                    <div class="text-center py-8">
                        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-success/10 flex items-center justify-center">
                            <i class="fa-solid fa-mug-hot text-success text-2xl"></i>
                        </div>
                        <h3 class="font-semibold text-base-content/70">It's the Weekend!</h3>
                        <p class="text-sm text-base-content/50">Enjoy your time off. See you on Monday.</p>
                    </div>
                    {% elif todays_schedule %}
                    <div class="space-y-2">
                        {% for entry in todays_schedule %}
                        <div class="flex items-center gap-4 p-3 rounded-xl transition-all
                            {% if entry.is_current %}bg-primary/10 border-2 border-primary{% elif entry.is_past %}bg-base-200/50 opacity-60{% else %}bg-base-200/30 hover:bg-base-200/50{% endif %}">

                            <div class="text-center min-w-[70px]">
                                <div class="text-xs font-medium {% if entry.is_current %}text-primary{% else %}text-base-content/50{% endif %}">
                                    {{ entry.period.start_time|time:"g:i A" }}
                                </div>
                                <div class="text-[10px] text-base-content/40">
                                    {{ entry.period.end_time|time:"g:i A" }}
                                </div>
                            </div>

                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-semibold {% if entry.is_current %}text-primary{% endif %}">
                                        {{ entry.subject.name }}
                                    </span>
                                    {% if entry.is_current %}
                                    <span class="badge badge-primary badge-xs animate-pulse">NOW</span>
                                    {% endif %}
                                </div>
                                <div class="text-sm text-base-content/60">
                                    {{ entry.class.name }}
                                </div>
                            </div>

                            {% if entry.is_current %}
                            <div class="flex gap-1">
                                {% if entry.uses_lesson_attendance %}
                                <a href="{% url 'academics:take_lesson_attendance' entry.entry.pk %}"
                                   hx-get="{% url 'academics:take_lesson_attendance' entry.entry.pk %}"
                                   hx-target="#modal-content"
                                   hx-swap="innerHTML"
                                   onclick="document.getElementById('global-modal').showModal()"
                                   class="btn btn-success btn-sm"
                                   title="Take Attendance">
                                    <i class="fa-solid fa-clipboard-check"></i>
                                </a>
                                {% endif %}
                                <a href="{% url 'core:enter_scores' entry.class.pk entry.subject.pk %}"
                                   hx-get="{% url 'core:enter_scores' entry.class.pk entry.subject.pk %}"
                                   hx-target="#main-content"
                                   hx-push-url="true"
                                   class="btn btn-primary btn-sm">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                    <span class="hidden sm:inline">Scores</span>
                                </a>
                            </div>
                            {% elif not entry.is_past %}
                            <div class="badge badge-ghost badge-sm">{{ entry.period.name }}</div>
                            {% else %}
                            <i class="fa-solid fa-check text-success/50"></i>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-8">
                        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-info/10 flex items-center justify-center">
                            <i class="fa-solid fa-calendar-check text-info text-2xl"></i>
                        </div>
                        <h3 class="font-semibold text-base-content/70">No Classes Today</h3>
                        <p class="text-sm text-base-content/50">You have no scheduled classes for today.</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- My Classes -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
            <div class="card-body p-0">
                <div class="flex items-center justify-between p-4 border-b border-base-200">
                    <h2 class="font-bold flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-secondary/10 flex items-center justify-center">
                            <i class="fa-solid fa-chalkboard-user text-secondary"></i>
                        </div>
                        My Classes
                    </h2>
                </div>

                <div class="p-4">
                    {% if assignments_by_class %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {% for class_name, data in assignments_by_class.items %}
                        <div class="group relative bg-gradient-to-br from-base-200/50 to-base-200/30 hover:from-primary/5 hover:to-primary/10 border border-base-300 hover:border-primary/30 rounded-xl p-4 transition-all">
                            <div class="flex items-start justify-between mb-3">
                                <div>
                                    <h3 class="font-bold text-base group-hover:text-primary transition-colors">{{ class_name }}</h3>
                                    <p class="text-xs text-base-content/50">
                                        <i class="fa-solid fa-users mr-1"></i>
                                        {{ data.student_count }} students
                                    </p>
                                </div>
                                <div class="dropdown dropdown-end">
                                    <label tabindex="0" class="btn btn-ghost btn-xs btn-circle">
                                        <i class="fa-solid fa-ellipsis-vertical"></i>
                                    </label>
                                    <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-44 border border-base-200">
                                        <li>
                                            <a href="{% url 'core:my_grading' %}"
                                               hx-get="{% url 'core:my_grading' %}"
                                               hx-target="#main-content"
                                               hx-push-url="true">
                                                <i class="fa-solid fa-pen-to-square text-primary"></i>
                                                Enter Scores
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'core:my_attendance' %}?class={{ data.class.pk }}"
                                               hx-get="{% url 'core:my_attendance' %}?class={{ data.class.pk }}"
                                               hx-target="#main-content"
                                               hx-push-url="true">
                                                <i class="fa-solid fa-clipboard-check text-success"></i>
                                                Attendance
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'gradebook:reports' %}?class={{ data.class.pk }}"
                                               hx-get="{% url 'gradebook:reports' %}?class={{ data.class.pk }}"
                                               hx-target="#main-content"
                                               hx-push-url="true">
                                                <i class="fa-solid fa-file-lines text-info"></i>
                                                Reports
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="flex flex-wrap gap-1.5">
                                {% for subject in data.subjects %}
                                <span class="badge badge-sm bg-base-100 border-base-300">
                                    {{ subject.short_name|default:subject.name }}
                                </span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="text-center py-8">
                        <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-base-200 flex items-center justify-center">
                            <i class="fa-solid fa-chalkboard text-base-content/30 text-2xl"></i>
                        </div>
                        <h3 class="font-semibold text-base-content/70">No Classes Assigned</h3>
                        <p class="text-sm text-base-content/50">Contact your administrator to get classes assigned.</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Homeroom Classes (Form Teacher Section) -->
        {% if homeroom_classes %}
        <div class="card bg-base-100 shadow-sm border border-base-200">
            <div class="card-body p-0">
                <div class="flex items-center justify-between p-4 border-b border-base-200">
                    <h2 class="font-bold flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-info/10 flex items-center justify-center">
                            <i class="fa-solid fa-house-user text-info"></i>
                        </div>
                        My Homeroom Classes
                        <span class="badge badge-info badge-sm">Form Teacher</span>
                    </h2>
                </div>

                <div class="divide-y divide-base-200">
                    {% for class in homeroom_classes %}
                    <div class="p-4 hover:bg-base-200/20 transition-colors">
                        <!-- Class Header -->
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-info/20 to-primary/20 flex items-center justify-center">
                                    <i class="fa-solid fa-users text-info text-lg"></i>
                                </div>
                                <div>
                                    <div class="font-bold text-lg">{{ class.name }}</div>
                                    <div class="text-sm text-base-content/50">
                                        {{ class.student_count }} students enrolled
                                    </div>
                                </div>
                            </div>
                            <div class="badge badge-outline badge-info">
                                <i class="fa-solid fa-star mr-1"></i>
                                Form Teacher
                            </div>
                        </div>

                        <!-- Quick Actions Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                            <!-- Attendance -->
                            <a href="{% url 'core:my_attendance' %}?class={{ class.pk }}"
                               hx-get="{% url 'core:my_attendance' %}?class={{ class.pk }}"
                               hx-target="#main-content"
                               hx-push-url="true"
                               class="btn btn-sm btn-ghost bg-success/5 hover:bg-success/10 border border-success/20 gap-1">
                                <i class="fa-solid fa-clipboard-check text-success"></i>
                                <span class="hidden sm:inline">Attendance</span>
                            </a>

                            <!-- View Reports -->
                            <a href="{% url 'gradebook:reports' %}?class={{ class.pk }}"
                               hx-get="{% url 'gradebook:reports' %}?class={{ class.pk }}"
                               hx-target="#main-content"
                               hx-push-url="true"
                               class="btn btn-sm btn-ghost bg-info/5 hover:bg-info/10 border border-info/20 gap-1">
                                <i class="fa-solid fa-file-lines text-info"></i>
                                <span class="hidden sm:inline">Reports</span>
                            </a>

                            <!-- Enter Remarks -->
                            <a href="{% url 'gradebook:bulk_remarks' class.pk %}"
                               hx-get="{% url 'gradebook:bulk_remarks' class.pk %}"
                               hx-target="#main-content"
                               hx-push-url="true"
                               class="btn btn-sm btn-ghost bg-warning/5 hover:bg-warning/10 border border-warning/20 gap-1">
                                <i class="fa-solid fa-comment-dots text-warning"></i>
                                <span class="hidden sm:inline">Remarks</span>
                            </a>

                            <!-- Distribute Reports -->
                            <a href="{% url 'gradebook:report_distribution' class.pk %}"
                               hx-get="{% url 'gradebook:report_distribution' class.pk %}"
                               hx-target="#main-content"
                               hx-push-url="true"
                               class="btn btn-sm btn-ghost bg-primary/5 hover:bg-primary/10 border border-primary/20 gap-1">
                                <i class="fa-solid fa-paper-plane text-primary"></i>
                                <span class="hidden sm:inline">Distribute</span>
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Right Column - Quick Actions -->
    <div class="space-y-6">

        <!-- Quick Actions -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
            <div class="card-body p-4">
                <h2 class="font-bold mb-4 flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-warning/10 flex items-center justify-center">
                        <i class="fa-solid fa-bolt text-warning"></i>
                    </div>
                    Quick Actions
                </h2>

                <div class="space-y-2">
                    <a href="{% url 'core:my_grading' %}"
                       hx-get="{% url 'core:my_grading' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-primary/5 hover:bg-primary/10 border border-primary/10 hover:border-primary/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-pen-to-square text-primary"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">Enter Scores</div>
                            <div class="text-xs text-base-content/50">Record student grades</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'core:my_attendance' %}"
                       hx-get="{% url 'core:my_attendance' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-success/5 hover:bg-success/10 border border-success/10 hover:border-success/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-clipboard-check text-success"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">Take Attendance</div>
                            <div class="text-xs text-base-content/50">Mark student presence</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'gradebook:reports' %}"
                       hx-get="{% url 'gradebook:reports' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-info/5 hover:bg-info/10 border border-info/10 hover:border-info/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-info/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-file-lines text-info"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">View Reports</div>
                            <div class="text-xs text-base-content/50">Student report cards</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'core:schedule' %}"
                       hx-get="{% url 'core:schedule' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-secondary/5 hover:bg-secondary/10 border border-secondary/10 hover:border-secondary/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-secondary/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-calendar-days text-secondary"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">My Schedule</div>
                            <div class="text-xs text-base-content/50">Weekly timetable</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'core:my_workload' %}"
                       hx-get="{% url 'core:my_workload' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-warning/5 hover:bg-warning/10 border border-warning/10 hover:border-warning/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-chart-pie text-warning"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">My Workload</div>
                            <div class="text-xs text-base-content/50">Teaching analytics</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'core:my_promotions' %}"
                       hx-get="{% url 'core:my_promotions' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-accent/5 hover:bg-accent/10 border border-accent/10 hover:border-accent/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-accent/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-ranking-star text-accent"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">My Promotions</div>
                            <div class="text-xs text-base-content/50">Rank history</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                    <a href="{% url 'core:my_qualifications' %}"
                       hx-get="{% url 'core:my_qualifications' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       class="flex items-center gap-3 p-3 rounded-xl bg-info/5 hover:bg-info/10 border border-info/10 hover:border-info/20 transition-all group">
                        <div class="w-10 h-10 rounded-lg bg-info/10 flex items-center justify-center group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-award text-info"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">My Qualifications</div>
                            <div class="text-xs text-base-content/50">Academic records</div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-xs text-base-content/30"></i>
                    </a>

                </div>
            </div>
        </div>

        <!-- My Profile Card -->
        <div class="card bg-gradient-to-br from-primary/5 to-secondary/5 border border-primary/10">
            <div class="card-body p-4">
                <div class="flex items-center gap-3 mb-3">
                    <div class="avatar">
                        <div class="w-12 h-12 rounded-full bg-primary text-primary-content">
                            {% if teacher.photo %}
                            <img src="{{ teacher.photo.url }}" alt="{{ teacher.full_name }}" loading="lazy" />
                            {% else %}
                            <div class="flex items-center justify-center h-full font-bold">
                                {{ teacher.first_name|slice:":1" }}{{ teacher.last_name|slice:":1" }}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="font-bold truncate">{{ teacher.full_name }}</div>
                    </div>
                </div>

                <div class="space-y-1.5 text-sm mb-3">
                    <div class="flex items-center gap-2 text-base-content/60">
                        <i class="fa-solid fa-id-badge w-4 text-center"></i>
                        <span class="font-mono text-xs">{{ teacher.staff_id }}</span>
                    </div>
                    {% if teacher.email %}
                    <div class="flex items-center gap-2 text-base-content/60">
                        <i class="fa-solid fa-envelope w-4 text-center"></i>
                        <span class="text-xs truncate">{{ teacher.email }}</span>
                    </div>
                    {% endif %}
                    {% if teacher.phone_number %}
                    <div class="flex items-center gap-2 text-base-content/60">
                        <i class="fa-solid fa-phone w-4 text-center"></i>
                        <span class="text-xs">{{ teacher.phone_number }}</span>
                    </div>
                    {% endif %}
                </div>

                <a href="{% url 'core:profile' %}"
                   hx-get="{% url 'core:profile' %}"
                   hx-target="#main-content"
                   hx-push-url="true"
                   class="btn btn-sm btn-ghost btn-block">
                    <i class="fa-solid fa-user"></i>
                    View Full Profile
                </a>
            </div>
        </div>

        <!-- Help Card -->
        <div class="card bg-base-200/50 border border-base-300">
            <div class="card-body p-4">
                <h3 class="font-semibold text-sm flex items-center gap-2 mb-2">
                    <i class="fa-solid fa-circle-question text-base-content/50"></i>
                    Need Help?
                </h3>
                <p class="text-xs text-base-content/60 mb-3">
                    If you have any questions or issues, please contact your school administrator.
                </p>
                <div class="flex gap-2">
                    <button hx-get="{% url 'accounts:password_change' %}"
                            hx-target="#password-change-container"
                            hx-swap="innerHTML"
                            onclick="document.getElementById('modal_password_change').showModal()"
                            class="btn btn-xs btn-ghost flex-1">
                        <i class="fa-solid fa-key"></i>
                        Change Password
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
