{% load core_tags %}
<div class="drawer-side z-50 lg:hidden">
    <label for="mobile-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
    <aside class="bg-base-100 w-72 flex flex-col h-full shadow-lg">
        <!-- Logo -->
        <div class="flex items-center gap-3 p-4 border-b border-base-300 shrink-0">
            {% if request.tenant.logo %}
                <img src="{{ request.tenant.logo.url }}" alt="{{ request.tenant.short_name }}" class="w-8 h-8 rounded object-contain" />
            {% else %}
                <div class="w-8 h-8 rounded bg-primary text-primary-content grid place-content-center font-bold">
                    {{ request.tenant.short_name|slice:":1"|default:"S" }}
                </div>
            {% endif %}
            <span class="font-bold text-lg">{{ request.tenant.short_name|default:"School" }}</span>
        </div>

        <!-- Navigation menu - scrollable -->
        <nav class="flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin">
            <ul class="menu p-2 gap-1 text-sm" id="mobile-nav">
                {% get_navigation_items as nav_items %}
                {% include "core/partials/nav_items.html" with nav_items=nav_items is_mobile=True %}
            </ul>
        </nav>

        <!-- Settings at bottom (admin only) -->
        {% if user.is_superuser or user.is_school_admin %}
        <div class="p-2 border-t border-base-300 shrink-0">
            <ul class="menu p-0">
                <li>
                    <a href="{% url 'core:settings' %}"
                       hx-get="{% url 'core:settings' %}"
                       hx-target="#main-content"
                       hx-push-url="true"
                       hx-swap="innerHTML show:window:top"
                       hx-on::after-request="document.getElementById('mobile-drawer').checked = false">
                        <i class="fa-solid fa-gear w-5 text-center"></i>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </div>
        {% endif %}
    </aside>
</div>
