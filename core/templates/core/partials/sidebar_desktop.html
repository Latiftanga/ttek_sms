{% load core_tags %}
<aside class="desktop-sidebar bg-base-100 hidden lg:flex flex-col shrink-0 z-20 border-r border-base-300 shadow-sm">
    <!-- Logo -->
    <div class="h-16 flex items-center px-4 border-b border-base-300 shrink-0">
        <div class="flex items-center gap-3 w-full">
            {% if request.tenant.logo %}
                <img src="{{ request.tenant.logo.url }}" alt="{{ request.tenant.short_name }}" class="w-8 h-8 rounded shrink-0 object-contain" />
            {% else %}
                <div class="w-8 h-8 rounded bg-primary text-primary-content grid place-content-center font-bold text-lg shrink-0">
                    {{ request.tenant.short_name|slice:":1"|default:"S" }}
                </div>
            {% endif %}
            <span class="sidebar-text font-bold text-lg tracking-tight">{{ request.tenant.short_name|default:"School" }}</span>
        </div>
    </div>

    <!-- Navigation menu - scrollable -->
    <nav class="flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin">
        <ul class="menu p-2 gap-1 text-sm" id="desktop-nav">
            {% get_navigation_items as nav_items %}
            {% include "core/partials/nav_items.html" with nav_items=nav_items is_mobile=False %}
        </ul>
    </nav>

    <!-- Settings at bottom (admin only) -->
    {% if user.is_superuser or user.is_school_admin %}
    <div class="p-2 border-t border-base-300 shrink-0">
        <ul class="menu p-0">
            <li>
                <a href="{% url 'core:settings' %}"
                   hx-get="{% url 'core:settings' %}"
                   hx-target="#main-content"
                   hx-push-url="true"
                   hx-swap="innerHTML show:window:top">
                    <i class="fa-solid fa-gear w-5 text-center"></i>
                    <span class="sidebar-text">Settings</span>
                </a>
            </li>
        </ul>
    </div>
    {% endif %}
</aside>
