{% load i18n admin_list %}
{% if result_hidden_fields %}
<div class="hidden">{{ result_hidden_fields }}</div>
{% endif %}

{% if results %}
<table class="table w-full">
    <thead>
        <tr>
            {% for header in result_headers %}
            <th scope="col" class="bg-base-200/70 text-xs font-semibold uppercase tracking-wider text-base-content/70 {% if header.sortable %}cursor-pointer hover:bg-base-300 transition-colors{% endif %} {% if forloop.first and action_form %}w-12 text-center{% endif %} whitespace-nowrap">
                {% if header.sortable %}
                <a href="{{ header.url|escape }}" class="flex items-center gap-2 text-inherit hover:text-primary">
                    <span>{{ header.text|capfirst }}</span>
                    {% if header.sorted %}
                        {% if header.ascending %}
                        <span class="w-5 h-5 rounded bg-primary/20 flex items-center justify-center">
                            <i class="fa-solid fa-arrow-up text-primary text-[10px]"></i>
                        </span>
                        {% else %}
                        <span class="w-5 h-5 rounded bg-primary/20 flex items-center justify-center">
                            <i class="fa-solid fa-arrow-down text-primary text-[10px]"></i>
                        </span>
                        {% endif %}
                    {% else %}
                        <i class="fa-solid fa-sort text-base-content/30 text-[10px]"></i>
                    {% endif %}
                </a>
                {% else %}
                    {{ header.text|capfirst }}
                {% endif %}
            </th>
            {% endfor %}
        </tr>
    </thead>
    <tbody class="divide-y divide-base-200">
        {% for result in results %}
        <tr class="hover:bg-primary/5 transition-colors">
            {% for item in result %}
            {{ item }}
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<style>
/* Table cell styling */
#changelist-form table td {
    padding: 0.875rem 1rem;
    vertical-align: middle;
    border: none;
}

#changelist-form table td a {
    color: oklch(var(--p));
    text-decoration: none;
    font-weight: 500;
}

#changelist-form table td a:hover {
    text-decoration: underline;
}

/* First column - object name */
#changelist-form table tbody tr td:nth-child(2) a {
    font-weight: 600;
}

/* Checkbox styling */
#changelist-form table td.action-checkbox,
#changelist-form table th.action-checkbox-column {
    width: 3rem;
    text-align: center;
    padding: 0.5rem;
}

#changelist-form table input[type="checkbox"] {
    width: 1.125rem;
    height: 1.125rem;
    cursor: pointer;
    border-radius: 4px;
    border: 2px solid oklch(var(--bc) / 0.2);
}

#changelist-form table input[type="checkbox"]:checked {
    background-color: oklch(var(--p));
    border-color: oklch(var(--p));
}

/* Boolean field styling */
#changelist-form table td img[src*="icon-yes"],
#changelist-form table td img[src*="icon-no"],
#changelist-form table td img[src*="icon-unknown"] {
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 50%;
    padding: 0.25rem;
}

#changelist-form table td img[src*="icon-yes"] {
    background: oklch(var(--su) / 0.15);
    filter: hue-rotate(80deg) saturate(1.5);
}

#changelist-form table td img[src*="icon-no"] {
    background: oklch(var(--er) / 0.15);
    filter: hue-rotate(-10deg) saturate(1.2);
}

/* Field null/empty styling */
#changelist-form table td em {
    color: oklch(var(--bc) / 0.4);
    font-style: normal;
    font-size: 0.75rem;
}

/* Nowrap for certain columns */
#changelist-form table td.nowrap {
    white-space: nowrap;
}

/* Action select checkbox column */
#changelist-form .action-select {
    margin: 0;
}

/* Row selection highlight */
#changelist-form table tbody tr:has(input[type="checkbox"]:checked) {
    background-color: oklch(var(--p) / 0.08);
}
</style>
{% else %}
<div class="p-12 text-center">
    <div class="w-16 h-16 rounded-full bg-base-200 flex items-center justify-center mx-auto mb-4">
        <i class="fa-solid fa-table text-2xl text-base-content/20"></i>
    </div>
    <p class="text-base-content/50">{% trans "No results found" %}</p>
</div>
{% endif %}
